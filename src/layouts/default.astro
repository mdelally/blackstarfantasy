---
import "../assets/main.css";
import LastFm from "../components/widgets/LastFm.vue";
import { Image } from "astro:assets";

// IMAGES
import FFCursor from "../assets/img/ff_cursor.png";
import FreePalestine from "../assets/img/standwithpalestine.png";
import SayNoToWeb3 from "../assets/img/roly-saynotoweb3.gif";
import Antifa from "../assets/img/antifa.webp";
import TransRights from "../assets/img/transrights.jpg";

const { title } = Astro.props;
const currentYear = new Date().getFullYear();

const currentPage = Astro.url.pathname;

const navItems = [
  {
    name: "HOME",
    href: "/home/",
  },
  {
    name: "ABOUT",
    href: "/about/",
  },
  {
    name: "CODE STUFFS",
    href: "/code/",
  },
  {
    name: "MY GAMES",
    href: "/games/",
  },
  {
    name: "ART & MUSIC",
    href: "/creative/",
  },
  {
    name: "BLOG",
    href: "/blog/",
  },
  {
    name: "REVIEWS",
    href: "/reviews/",
  },
];

const linksNavItems = [
  {
    name: "MY GITHUB",
    href: "https://github.com/mdelally",
  },
  {
    name: "VILLADEX (ACNH app)",
    href: "https://villadex.netlify.app",
  },
  {
    name: "ITCH.IO",
    href: "https://ghostdoor.itch.io",
  },
];

const badgesNavItems = [
  {
    image: FreePalestine,
    href: "https://hillhouse.neocities.org/journal/notes/palestine",
    alt: "Free Palestine",
  },
  {
    image: SayNoToWeb3,
    href: "https://yesterweb.org/no-to-web3/",
    alt: "Say No to Web3",
  },
  {
    image: Antifa,
    href: "https://en.wikipedia.org/wiki/Anti-fascism",
    alt: "Antifa",
  },

  {
    image: TransRights,
    href: "https://translifeline.org/resource_category/mutual-aid-funds/",
    alt: "Trans Rights",
  },
];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width" />
    <title>{title} | black.star.fantasy</title>
  </head>

  <body class="has-motion">
    <section class="flex justify-center">
      <div
        class="flex flex-col justify-between w-[1440px] bg-black/40 backdrop-blur-md border-l-2 border-r-2 border-t-2 my-6 mx-6 border-white/30 rounded-lg shadow-xl shadow-black/35"
      >
        <section>
          <!-- BANNER AND TOP NAVs -->
          <header>
            <!-- TOP NAV -->
            <nav
              class="bg-black py-1 px-2 flex gap-2 justify-between items-center rounded-t-lg"
            >
              <div class="flex items-center flex-grow justify-between">
                <LastFm client:only="vue" />
                <button
                  class="px-2 py-1 cursor-pointer text-sm hover:bg-amber-500/50 rounded-md transition-all duration-300 ease-in-out"
                  type="button"
                  onclick="document.body.classList.toggle('has-motion');"
                  title="Toggle animated elements on/off"
                >
                  TOGGLE MOTION
                </button>
              </div>
              <!-- <div>
                {navItems.map((item) => <a href={item.href}>{item.name}</a>)}
              </div> -->
            </nav>
            <!-- BANNER -->
            <a
              href="/home/"
              id="banner"
              class="group w-full flex flex-col justify-center items-center transition-all duration-300 ease-in-out no-underline border-t-2 border-b-2 border-white/30"
            >
              <h1
                class="isolate mask-x-from-65% mask-x-to-95% bg-black/80 mix-blend-overlay backdrop-blur-md w-full py-6 text-4xl text-yellow-200 tracking-widest flex items-center justify-center text-shadow-lg text-shadow-black group-hover:bg-black/90 transition-all duration-300 ease-in-out"
              >
                <span
                  class="group-hover:scale-115 transition-all duration-300 ease-in-out"
                >
                  <span class="text-white animate-pulse">//&nbsp;</span
                  >black<span class="text-white">.</span>star<span
                    class="text-white">.</span
                  >fantasy
                </span>
              </h1>
            </a>
            <!-- BOTTOM NAV -->
            <nav
              class="bg-black/40 backdrop-blur-sm py-4 px-2 flex gap-2 justify-center items-center border-b-2 border-white/30"
            >
              {navItems.map((item) => <a href={item.href}>{item.name}</a>)}
            </nav>
          </header>

          <!-- MAIN CONTENT -->
          <main class="flex">
            <!-- LEFT SIDEBAR -->
            <aside class="w-1/4 pt-6 pl-6 mb-6 sticky top-6">
              <section class="sticky top-6">
                <!-- MENU -->
                <nav
                  class="scanlines flex flex-col gap-1 bg-black/50 p-4 rounded-lg border-2 border-white/20 shadow-lg shadow-black/15 mb-6"
                >
                  <h2
                    class="text-xl font-light mb-2 text-white/20 border-b-2 border-dotted border-white/20 uppercase tracking-[12px]"
                  >
                    MENU
                  </h2>
                  <ul class="-ml-[16px] flex flex-col">
                    {
                      navItems.map((item) => (
                        <li class="flex flex-grow justify-end items-center flex-row-reverse">
                          <a class="peer w-full" href={item.href}>
                            {currentPage === item.href && "»"}
                            {item.name}
                            {currentPage === item.href && "«"}
                          </a>
                          <Image
                            src={FFCursor}
                            alt="Menu cursor of a finger pointing to the right"
                            width={32}
                            height={48}
                            loading="eager"
                            class="menuCursor -mx-[8px] -my-[8px] opacity-0 peer-hover:opacity-100 peer-focus:opacity-100 transition-all duration-200 ease-in-out"
                          />
                        </li>
                      ))
                    }
                  </ul>
                </nav>

                <!-- LINKS -->
                <nav
                  class="scanlines flex flex-col gap-1 bg-black/50 p-4 rounded-lg border-2 border-white/20 shadow-lg shadow-black/15 mb-6"
                >
                  <h2
                    class="text-xl font-light mb-2 text-white/20 border-b-2 border-dotted border-white/20 uppercase tracking-[12px]"
                  >
                    LINKS
                  </h2>
                  <ul class="-ml-[16px] flex flex-col">
                    {
                      linksNavItems.map((item) => (
                        <li class="flex flex-grow justify-end items-center flex-row-reverse">
                          <a
                            class="peer w-full"
                            href={item.href}
                            target="_blank"
                          >
                            {item.name}
                          </a>
                          <Image
                            src={FFCursor}
                            alt="Menu cursor of a finger pointing to the right"
                            width={32}
                            height={48}
                            loading="eager"
                            class="menuCursor -mx-[8px] -my-[8px] opacity-0 peer-hover:opacity-100 peer-focus:opacity-100 transition-all duration-200 ease-in-out"
                          />
                        </li>
                      ))
                    }
                  </ul>
                </nav>

                <!-- BADGES/BLINKIES -->
                <section
                  class="scanlines bg-black/50 p-2 rounded-lg border-2 border-white/20 shadow-lg shadow-black/15 flex flex-wrap items-center justify-center gap-1"
                >
                  {
                    badgesNavItems.map((item) => (
                      <a href={item.href} target="_blank">
                        <Image
                          src={item.image}
                          alt={item.alt}
                          width={88}
                          height={31}
                          loading="eager"
                        />
                      </a>
                    ))
                  }
                </section>
              </section>
            </aside>

            <section class="w-full py-6 px-16">
              <slot />
            </section>
          </main>
        </section>

        <!-- FOOTER -->
        <footer
          id="footer"
          class="border-t-2 border-b-2 border-white/30 flex flex-col items-center gap-3 py-8 text-sm text-stone-400 rounded-b-lg"
        >
          <p class="text-white bg-black/50 backdrop-blur-sm p-2">
            Black Star Fantasy and original content &copy; {currentYear} Michael
            DeLally. All other content &copy; their respective owners.
          </p>
          <p class="text-white bg-black/50 backdrop-blur-sm p-2">
            <a
              href="https://github.com/mdelally/blackstarfantasy"
              target="_blank"
              title="View the source code on GitHub"
            >
              Made with ❤️ using Astro and TailwindCSS.
            </a>
          </p>
        </footer>
      </div>
    </section>
  </body>
</html>

<style>
  #banner {
    background-image: url("../assets/img/banner.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    height: 280px;
  }

  #footer {
    background-image: url("../assets/img/footer.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }

  .menuCursor {
    animation: cursorBounce 1s infinite; /* bounce 1s infinite */
  }

  @keyframes cursorBounce {
    0%,
    100% {
      transform: translateX(-25%);
      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
    }
    50% {
      transform: none;
      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
  }
</style>
